---
import BaseLayout from '../layouts/BaseLayout.astro';
import SubpageHero from '../components/SubpageHero.astro';
import ColorDividerShort from '../components/ColorDividerShort.astro';

import '../styles/base.css';
import '../styles/theme.root.css';
import FAQSection from '../components/FAQSection.astro';
import Accordion from '../components/Accordion.astro';
import AccordionItem from '../components/AccordionItem.astro';
---

<BaseLayout
  title="Contact Arizona Family Connections | Reach Our Team"
  description="Contact Arizona Family Connections with questions about supervised visitation or family support services. Our team is here to help and will respond promptly."
  language="en"
  canonical="/contact/"
>
  <SubpageHero
    subtitle="Contact Arizona Family Connections"
    title="We’re Here to Help Every Step of the Way"
    description="Have questions or need to get started with services? Reach out to our team for caring support and clear guidance."
    ctaText="Send us a Message"
    ctaUrl="/contact/#contact-form"
    decorationLeft="/images/email-watermark.svg"
    decorationRight="/images/phone-watermark.svg"
  />
  <ColorDividerShort />

  <section
    class="contact-section"
    aria-labelledby="contact-details-heading"
  >
    <div class="contact-container">
      <h2 id="contact-details-heading" class="visually-hidden">
        Contact details and message form
      </h2>

      <div class="contact-info-grid">
        <div class="contact-card">
          <div class="contact-icon">
            <img
              src="/images/email-icon.svg"
              alt="Email Icon"
            />
          </div>
          <h3 class="contact-card-title">Send us an Email</h3>
          <a
            href="mailto:contact@azfamilyconnections.com"
            class="contact-link"
          >
            contact@azfamilyconnections.com
          </a>
          <p class="contact-card-response">We'll follow up as soon as we're able.</p>
        </div>

        <div class="contact-card">
          <div class="contact-icon">
            <img
              src="/images/phone-icon.svg"
              alt="Phone Icon"
            />
          </div>
          <h3 class="contact-card-title">Give us a Call</h3>
          <div class="contact-phone-links">
            <a href="tel:+14807646689" class="contact-link">Arizona: (480) 764-6689</a>
            <a href="tel:+19712263820" class="contact-link">Portland: (971) 226-3820</a>
          </div>
          <p class="contact-card-response">Monday-Friday, 9am-6pm</p>
          <p class="contact-card-response">Saturday-Sunday, By Appointment</p>
        </div>
      </div>

      <div class="contact-form-wrapper" id="contact-form">
        <form
          class="contact-form"
          method="POST"
          name="afc-contact"
          data-netlify="true"
          netlify-honeypot="bot-field"
          aria-label="Contact form"
        >
          <!-- Required hidden field for Netlify -->
          <input type="hidden" name="form-name" value="afc-contact" />

          <!-- Hidden field for custom subject {Name} -- {Subject} -->
          <input type="hidden" name="custom-subject" value="" />

          <!-- Honeypot field for spam bots -->
          <p class="honeypot-field" aria-hidden="true">
            <label for="bot-field">Do not fill this field if you are human</label>
            <input id="bot-field" name="bot-field" type="text" />
          </p>

          <div class="form-row">
            <div class="form-group">
              <label for="name" class="form-label">Your Name: *</label>
              <input
                type="text"
                id="name"
                name="name"
                class="form-input"
                required
                autocomplete="name"
                placeholder="John Doe"
              />
            </div>
            <div class="form-group">
              <label for="email" class="form-label">Email Address: *</label>
              <input
                type="email"
                id="email"
                name="email"
                class="form-input"
                required
                autocomplete="email"
                placeholder="you@example.com"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="phone" class="form-label">Phone Number:</label>
              <input
                type="tel"
                id="phone"
                name="phone"
                class="form-input"
                autocomplete="tel"
                placeholder="(602) 555-1234"
              />
            </div>
            <div class="form-group">
              <label for="subject" class="form-label">Subject: *</label>
              <select
                id="subject"
                name="subject"
                class="form-select"
                required
              >
                <option value="">-- Select a Subject --</option>
                <option value="General Inquiry">General Inquiry</option>
                <option value="Scheduling Question">Scheduling Question</option>
                <option value="Services Information">Services Information</option>
                <option value="Feedback">Feedback</option>
                <option value="Other">Other</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="message" class="form-label">Message: *</label>
            <textarea
              id="message"
              name="message"
              class="form-textarea"
              rows="5"
              required
              placeholder="Please share your message here..."
            ></textarea>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">
              Send Message
            </button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <FAQSection
    title="Frequently Asked Questions"
    description="Find quick answers about supervised visitation, exchanges, transportation, and getting started with Arizona Family Connections."
  >
    <Accordion label="Frequently Asked Questions">
      <AccordionItem title="Are you a member of any professional organizations?">
        <p>
          Yes. Arizona Family Connections is listed with SV Directory and the Supervised Visitation Network.
          We are also included in the RSAT and Second Chance Resource databases, and we are an active
          member of the Peoria Chamber of Commerce.
        </p>
      </AccordionItem>

      <AccordionItem title="How much do you charge?">
        <p>
          Our supervised visitation and monitored exchange fees are billed hourly and are based on the number
          of children and the type of service provided. You can view current rates in our
          <a href="/#pricing" class="link-inline">pricing section</a>. If you have questions about your
          specific situation, please reach out and we’ll be happy to walk through costs with you.
        </p>
      </AccordionItem>

      <AccordionItem title="Do you provide transportation for children?">
        <p>
          Yes. A member of our team can pick up and drop off your child when transportation is needed for a
          visit or exchange. There is a transportation fee, and our staff can provide car seats when required.
          For details about routes and current rates, please contact our team or review our service and
          pricing information.
        </p>
        <p>
          If transportation will be part of your plan, we recommend noting this during the intake process so
          we can plan accordingly.
        </p>
      </AccordionItem>

      <AccordionItem title="What types of services do you offer?">
        <p>
          We provide a range of services to support safe and structured parent–child contact, including
          supervised visitation, monitored exchanges, virtual/telephonic visits, transportation support, and
          related documentation such as objective reports and court testimony when appropriate.
        </p>
        <p>
          You can learn more about each option on our
          <a href="/services/" class="link-inline">Services page</a>.
        </p>
      </AccordionItem>

      <AccordionItem title="Where do visits take place?">
        <p>
          Visits can occur in a variety of settings depending on the case, including our office, approved
          community locations, or other arrangements that support the safety and well-being of the child.
        </p>
        <p>
          Specific locations are determined during the intake and scheduling process. For a full overview of
          our supervised visitation and exchange settings, please visit our
          <a href="/services/" class="link-inline">Services page</a>.
        </p>
      </AccordionItem>

      <AccordionItem title="How do I get started?">
        <p>
          To begin, complete our secure intake form so we can review your case details, court orders, and
          any safety considerations. Once we receive your information, our team will follow up to confirm
          eligibility, discuss available services, and get started with your first visit.
        </p>
        <p>
          You can start the process at any time on our
          <a href="/schedule/" class="link-inline">Schedule page</a>.
        </p>
      </AccordionItem>

      <AccordionItem title="Do you offer services in Spanish?">
        <p>
          Yes. We can provide services and communication in both English and Spanish where needed. If you or
          a family member prefers Spanish, please let us know during intake so we can plan appropriate
          support.
        </p>
        <p>
          To review available services, visit our
          <a href="/services/" class="link-inline">Services page</a>, or begin the intake process on our
          <a href="/schedule/" class="link-inline">Schedule page</a>.
        </p>
      </AccordionItem>
    </Accordion>
  </FAQSection>
</BaseLayout>

<style>
  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .contact-section {
    padding: var(--space-8) 0;
  }

  .contact-container {
    max-width: var(--container-xl);
    margin: 0 auto;
    padding: 0 var(--pad-component-lg);
  }

  .contact-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-6);
    margin-bottom: var(--space-8);
  }

  .contact-card {
    background: linear-gradient(
      135deg,
      var(--color-surface) 0%,
      rgba(6, 169, 231, 0.05) 100%
    );
    border: 2px solid var(--brand-primary-200);
    border-radius: var(--radius-lg);
    padding: var(--space-6);
    text-align: center;
    transition: all var(--duration-std) var(--ease-standard);
  }

  .contact-card:hover {
    border-color: var(--brand-primary-500);
    box-shadow: 0 8px 24px rgba(6, 169, 231, 0.12);
    transform: translateY(-4px);
  }

  .contact-icon {
    width: 56px;
    height: 56px;
    margin: 0 auto var(--space-4);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
  }

  .contact-icon img {
    width: 100%;
    height: 100%;
  }

  .contact-card-title {
    margin: 0 0 var(--space-2);
    font-size: var(--text-lg);
    font-weight: var(--weight-bold);
    color: var(--color-text);
  }

  .contact-link {
    display: inline-block;
    color: var(--brand-primary-500);
    text-decoration: none;
    font-weight: var(--weight-bold);
    font-size: var(--text-base);
    margin-bottom: var(--space-2);
    transition: color var(--duration-std) var(--ease-standard);
  }

  .contact-link:hover {
    color: var(--brand-primary-600);
  }

  .contact-phone-links {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
    margin-bottom: var(--space-2);
  }

  .contact-phone-links .contact-link {
    display: block;
    margin-bottom: 0;
  }

  .contact-card-text {
    margin: 0 0 var(--space-2);
    font-size: var(--text-base);
    color: var(--color-text);
    line-height: 1.6;
  }

  .contact-card-response {
    margin: 0;
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
    font-style: italic;
  }

  .submit-success {
    background: var(--color-success) !important;
    border-color: var(--color-success) !important;
    color: var(--color-success-contrast, #fff) !important;
  }

  .contact-form-wrapper {
    background: linear-gradient(
      135deg,
      var(--color-surface) 0%,
      rgba(6, 169, 231, 0.03) 100%
    );
    border: 2px solid var(--brand-primary-200);
    border-radius: var(--radius-lg);
    padding: var(--space-8);
  }

  .contact-form {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }

  .form-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-4);
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
  }

  .form-label {
    font-weight: var(--weight-bold);
    font-size: var(--text-base);
    color: var(--color-text);
  }

  .form-input,
  .form-select,
  .form-textarea {
    padding: var(--space-3);
    border: 2px solid var(--color-border);
    border-radius: var(--radius-md);
    font-family: var(--font-body);
    font-size: var(--text-base);
    color: var(--color-text);
    background: var(--color-surface);
    transition: all var(--duration-std) var(--ease-standard);
  }

  .form-input::placeholder,
  .form-textarea::placeholder {
    color: var(--color-text-secondary);
  }

  .form-input:hover,
  .form-select:hover,
  .form-textarea:hover {
    border-color: var(--brand-primary-300);
  }

  .form-input:focus,
  .form-select:focus,
  .form-textarea:focus {
    outline: none;
    border-color: var(--brand-primary-500);
    box-shadow: 0 0 0 3px rgba(6, 169, 231, 0.1);
  }

  .form-textarea {
    resize: vertical;
    min-height: 140px;
    font-family: var(--font-body);
  }

  .form-actions {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-4);
    margin-top: var(--space-4);
    padding-top: var(--space-4);
  }

  .honeypot-field {
    display: none;
  }

  @media (max-width: 767px) {
    .contact-container {
      padding: 0 var(--pad-component);
    }

    .contact-info-grid {
      grid-template-columns: 1fr;
      gap: var(--space-4);
    }

    .contact-form-wrapper {
      padding: var(--space-6);
    }

    .form-row {
      grid-template-columns: 1fr;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .contact-card,
    .form-input,
    .form-select,
    .form-textarea,
    .contact-link {
      transition: none;
    }

    .contact-card:hover {
      transform: none;
    }
  }
</style>

<script is:inline type="module">
  function encode(data) {
    return Object.keys(data)
      .map((key) => encodeURIComponent(key) + '=' + encodeURIComponent(data[key]))
      .join('&');
  }

  const form = document.querySelector('.contact-form');
  const submitButton = form instanceof HTMLFormElement
    ? form.querySelector('button[type="submit"]')
    : null;
  const defaultSubmitText = submitButton instanceof HTMLButtonElement
    ? submitButton.textContent || 'Submit'
    : 'Submit';

  if (form instanceof HTMLFormElement) {
    form.addEventListener('submit', (event) => {
      event.preventDefault();

      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      // Basic required fields check
      if (!data.name || !data.email || !data.message || !data.subject) {
        alert('Please fill in all required fields.');
        return;
      }

      // Ensure Netlify knows which form this is
      data['form-name'] = form.getAttribute('name') || 'afc-contact';

      // Build custom subject line: {Name} -- {Subject}
      const customSubject = `${data.name} -- ${data.subject}`;
      data['custom-subject'] = customSubject;

      // Keep hidden input in sync (optional but nice)
      const customSubjectInput = form.querySelector('input[name="custom-subject"]');
      if (customSubjectInput) {
        customSubjectInput.value = customSubject;
      }

      if (submitButton instanceof HTMLButtonElement) {
        submitButton.classList.remove('submit-success');
        submitButton.classList.add('btn-primary');
        submitButton.disabled = true;
        submitButton.textContent = 'Submitting...';
      }

      fetch('/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: encode(data),
      })
        .then(() => {
          console.log('Form submitted:', data);
          setTimeout(() => {
            if (submitButton instanceof HTMLButtonElement) {
              submitButton.classList.remove('btn-primary');
              submitButton.classList.add('submit-success');
              submitButton.textContent = 'Thank you for your inquiry';
              submitButton.disabled = false;
            }
          }, 500);
          form.reset();
        })
        .catch((error) => {
          console.error('Form submission error:', error);
          if (submitButton instanceof HTMLButtonElement) {
            submitButton.classList.remove('submit-success');
            submitButton.classList.add('btn-primary');
            submitButton.textContent = defaultSubmitText;
            submitButton.disabled = false;
          }
          alert('There was a problem submitting the form. Please try again.');
        });
    });
  }
</script>


