---
import BaseLayout from '../../layouts/BaseLayout.astro';
import SubpageHero from '../../components/SubpageHero.astro';
import ColorDividerShort from '../../components/ColorDividerShort.astro';

import '../../styles/base.css';
import '../../styles/theme.root.css';
import FAQSection from '../../components/FAQSection.astro';
import Accordion from '../../components/Accordion.astro';
import AccordionItem from '../../components/AccordionItem.astro';
---

<BaseLayout
  title="Contacto | Arizona Family Connections"
  description="Póngase en contacto con Arizona Family Connections si tiene preguntas sobre visitas supervisadas o servicios de apoyo familiar. Nuestro equipo está aquí para ayudarle y responderá con prontitud."
  language="es"
  canonical="/es/contact/"
>
  <SubpageHero
    subtitle="Contacto de Arizona Family Connections"
    title="Estamos aquí para ayudarle en cada paso"
    description="¿Tiene preguntas o necesita Comenzar? Comuníquese con nuestro equipo para recibir apoyo atento y orientación clara."
    ctaText="Envíenos un mensaje"
    ctaUrl="/es/contact/#contact-form"
    decorationLeft="/images/email-watermark.svg"
    decorationRight="/images/phone-watermark.svg"
  />
  <ColorDividerShort />

  <section
    class="contact-section"
    aria-labelledby="contact-details-heading"
  >
    <div class="contact-container">
      <h2 id="contact-details-heading" class="visually-hidden">
        Detalles de contacto y formulario de mensaje
      </h2>

      <div class="contact-info-grid">
        <div class="contact-card">
          <div class="contact-icon">
            <img
              src="/images/email-icon.svg"
              alt="Ícono de correo electrónico"
              width="56"
              height="56"
              loading="lazy"
            />
          </div>
          <h3 class="contact-card-title">Envíanos un correo</h3>
          <a
            href="mailto:contact@azfamilyconnections.com"
            class="contact-link"
          >
            contact@azfamilyconnections.com
          </a>
          <p class="contact-card-response">Nos pondremos en contacto en cuanto nos sea posible.</p>
        </div>

        <div class="contact-card">
          <div class="contact-icon">
            <img
              src="/images/phone-icon.svg"
              alt="Ícono de teléfono"
              width="56"
              height="56"
              loading="lazy"
            />
          </div>
          <h3 class="contact-card-title">Llámanos</h3>
          <div class="contact-phone-links">
            <a href="tel:+14807646689" class="contact-link">Arizona: (480) 764-6689</a>
            <a href="tel:+19712263820" class="contact-link">Portland: (971) 226-3820</a>
          </div>
          <p class="contact-card-response">Lunes–Viernes, 9am–6pm</p>
          <p class="contact-card-response">Sábado–Domingo, con cita previa</p>
        </div>
      </div>

      <div class="contact-form-wrapper" id="contact-form">
        <form
          class="contact-form"
          method="POST"
          name="afc-contact-es"
          data-netlify="true"
          netlify-honeypot="bot-field"
          aria-label="Formulario de contacto"
        >
          <!-- Campo oculto requerido para Netlify -->
          <input type="hidden" name="form-name" value="afc-contact-es" />

          <!-- Campo oculto para asunto personalizado {Nombre} -- {Asunto} -->
          <input type="hidden" name="custom-subject" value="" />

          <!-- Honeypot para bots de spam -->
          <p class="honeypot-field" aria-hidden="true">
            <label for="bot-field">No llene este campo si es humano</label>
            <input id="bot-field" name="bot-field" type="text" />
          </p>

          <div class="form-row">
            <div class="form-group">
              <label for="name" class="form-label">Su nombre: *</label>
              <input
                type="text"
                id="name"
                name="name"
                class="form-input"
                required
                autocomplete="name"
                placeholder="Juan Pérez"
              />
            </div>
            <div class="form-group">
              <label for="email" class="form-label">Correo electrónico: *</label>
              <input
                type="email"
                id="email"
                name="email"
                class="form-input"
                required
                autocomplete="email"
                placeholder="usted@ejemplo.com"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="phone" class="form-label">Número de teléfono:</label>
              <input
                type="tel"
                id="phone"
                name="phone"
                class="form-input"
                autocomplete="tel"
                placeholder="(602) 555-1234"
              />
            </div>
            <div class="form-group">
              <label for="subject" class="form-label">Asunto: *</label>
              <select
                id="subject"
                name="subject"
                class="form-select"
                required
              >
                <option value="">-- Seleccione un asunto --</option>
                <option value="Consulta general">Consulta general</option>
                <option value="Pregunta sobre programación">Pregunta sobre programación</option>
                <option value="Información de servicios">Información de servicios</option>
                <option value="Comentarios">Comentarios</option>
                <option value="Otro">Otro</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="message" class="form-label">Mensaje: *</label>
            <textarea
              id="message"
              name="message"
              class="form-textarea"
              rows="5"
              required
              placeholder="Comparta su mensaje aquí..."
            ></textarea>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">
              Enviar mensaje
            </button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <FAQSection
    title="Preguntas frecuentes"
    description="Encuentre respuestas rápidas sobre visitas supervisadas, intercambios, transporte y cómo comenzar con Arizona Family Connections."
  >
    <Accordion label="Preguntas frecuentes">
      <AccordionItem title="¿Son miembros de alguna organización profesional?">
        <p>
          Sí. Arizona Family Connections está registrada en SV Directory y en la
          Supervised Visitation Network. También aparecemos en las bases de datos de
          recursos de RSAT y Second Chance, y somos un miembro activo de la Cámara
          de Comercio de Peoria.
        </p>
      </AccordionItem>

      <AccordionItem title="¿Cuánto cuestan los servicios?">
        <p>
          Nuestras tarifas por visitas supervisadas e intercambios monitoreados se
          cobran por hora y se basan en el número de niños y el tipo de servicio
          proporcionado. Puede revisar las tarifas actuales en nuestra
          <a href="/es/#pricing" class="link-inline">sección de precios</a>. Si tiene
          preguntas sobre su situación específica, con gusto le ayudaremos a revisar
          los costos.
        </p>
      </AccordionItem>

      <AccordionItem title="¿Proporcionan transporte para los niños?">
        <p>
          Sí. Un miembro de nuestro equipo puede recoger y llevar a su hijo cuando se
          necesite transporte para una visita o intercambio. Hay una tarifa de
          transporte, y nuestro personal puede proporcionar asientos de seguridad
          para niños cuando sea necesario.
        </p>
        <p>
          Si el transporte formará parte de su plan, le recomendamos mencionarlo durante
          el proceso de admisión para que podamos organizarlo con anticipación.
        </p>
      </AccordionItem>

      <AccordionItem title="¿Qué tipo de servicios ofrecen?">
        <p>
          Ofrecemos una variedad de servicios para apoyar un contacto seguro y estructurado
          entre padres e hijos, incluyendo visitas supervisadas, intercambios monitoreados,
          visitas virtuales o telefónicas, apoyo en transporte y documentación relacionada
          como informes objetivos y testimonio en la corte cuando corresponde.
        </p>
        <p>
          Puede conocer más sobre cada opción en nuestra
          <a href="/es/services/" class="link-inline">página de Servicios</a>.
        </p>
      </AccordionItem>

      <AccordionItem title="¿Dónde se llevan a cabo las visitas?">
        <p>
          Las visitas pueden realizarse en diferentes lugares según el caso, incluyendo
          nuestra oficina, ciertos lugares comunitarios aprobados u otros entornos que
          promuevan la seguridad y el bienestar del niño.
        </p>
        <p>
          Los lugares específicos se determinan durante el proceso de admisión y
          programación. Para ver una explicación más detallada sobre los entornos de
          visita e intercambio supervisado, visite nuestra
          <a href="/es/services/" class="link-inline">página de Servicios</a>.
        </p>
      </AccordionItem>

      <AccordionItem title="¿Cómo empiezo?">
        <p>
          Para comenzar, complete nuestro formulario seguro de admisión para que podamos
          revisar los detalles de su caso, las órdenes de la corte y cualquier consideración
          de seguridad. Una vez que recibamos su información, nuestro equipo se pondrá en
          contacto con usted para confirmar elegibilidad, revisar los servicios disponibles
          y comenzar con su primera visita.
        </p>
        <p>
          Puede iniciar el proceso en cualquier momento desde nuestra
          <a href="/es/schedule/" class="link-inline">página de Programación</a>.
        </p>
      </AccordionItem>

      <AccordionItem title="¿Ofrecen servicios en español?">
        <p>
          Sí. Podemos brindar servicios y comunicación tanto en inglés como en español
          según sea necesario. Si usted o algún miembro de su familia prefiere el español,
          por favor indíquelo durante la admisión para que podamos planear el apoyo
          adecuado.
        </p>
        <p>
          Para revisar los servicios disponibles, visite nuestra
          <a href="/es/services/" class="link-inline">página de Servicios</a>, o comience el
          proceso de admisión desde nuestra
          <a href="/es/schedule/" class="link-inline">página de Programación</a>.
        </p>
      </AccordionItem>
    </Accordion>
  </FAQSection>
</BaseLayout>

<style>
  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .contact-section {
    padding: var(--space-8) 0;
  }

  .contact-container {
    max-width: var(--container-xl);
    margin: 0 auto;
    padding: 0 var(--pad-component-lg);
  }

  .contact-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-6);
    margin-bottom: var(--space-8);
  }

  .contact-card {
    background: linear-gradient(
      135deg,
      var(--color-surface) 0%,
      rgba(6, 169, 231, 0.05) 100%
    );
    border: 2px solid var(--brand-primary-200);
    border-radius: var(--radius-lg);
    padding: var(--space-6);
    text-align: center;
    transition: all var(--duration-std) var(--ease-standard);
  }

  .contact-card:hover {
    border-color: var(--brand-primary-500);
    box-shadow: 0 8px 24px rgba(6, 169, 231, 0.12);
    transform: translateY(-4px);
  }

  .contact-icon {
    width: 56px;
    height: 56px;
    margin: 0 auto var(--space-4);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
  }

  .contact-icon img {
    width: 100%;
    height: 100%;
  }

  .contact-card-title {
    margin: 0 0 var(--space-2);
    font-size: var(--text-lg);
    font-weight: var(--weight-bold);
    color: var(--color-text);
  }

  .contact-link {
    display: inline-block;
    color: var(--brand-primary-500);
    text-decoration: none;
    font-weight: var(--weight-bold);
    font-size: var(--text-base);
    margin-bottom: var(--space-2);
    transition: color var(--duration-std) var(--ease-standard);
  }

  .contact-link:hover {
    color: var(--brand-primary-600);
  }

  .contact-phone-links {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
    margin-bottom: var(--space-2);
  }

  .contact-phone-links .contact-link {
    display: block;
    margin-bottom: 0;
  }

  .contact-card-text {
    margin: 0 0 var(--space-2);
    font-size: var(--text-base);
    color: var(--color-text);
    line-height: 1.6;
  }

  .contact-card-response {
    margin: 0;
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
    font-style: italic;
  }

  .submit-success {
    background: var(--color-success) !important;
    border-color: var(--color-success) !important;
    color: var(--color-success-contrast, #fff) !important;
  }

  .contact-form-wrapper {
    background: linear-gradient(
      135deg,
      var(--color-surface) 0%,
      rgba(6, 169, 231, 0.03) 100%
    );
    border: 2px solid var(--brand-primary-200);
    border-radius: var(--radius-lg);
    padding: var(--space-8);
  }

  .contact-form {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }

  .form-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-4);
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
  }

  .form-label {
    font-weight: var(--weight-bold);
    font-size: var(--text-base);
    color: var(--color-text);
  }

  .form-input,
  .form-select,
  .form-textarea {
    padding: var(--space-3);
    border: 2px solid var(--color-border);
    border-radius: var(--radius-md);
    font-family: var(--font-body);
    font-size: var(--text-base);
    color: var(--color-text);
    background: var(--color-surface);
    transition: all var(--duration-std) var(--ease-standard);
  }

  .form-input::placeholder,
  .form-textarea::placeholder {
    color: var(--color-text-secondary);
  }

  .form-input:hover,
  .form-select:hover,
  .form-textarea:hover {
    border-color: var(--brand-primary-300);
  }

  .form-input:focus,
  .form-select:focus,
  .form-textarea:focus {
    outline: none;
    border-color: var(--brand-primary-500);
    box-shadow: 0 0 0 3px rgba(6, 169, 231, 0.1);
  }

  .form-textarea {
    resize: vertical;
    min-height: 140px;
    font-family: var(--font-body);
  }

  .form-actions {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-4);
    margin-top: var(--space-4);
    padding-top: var(--space-4);
  }

  .honeypot-field {
    display: none;
  }

  @media (max-width: 767px) {
    .contact-container {
      padding: 0 var(--pad-component);
    }

    .contact-info-grid {
      grid-template-columns: 1fr;
      gap: var(--space-4);
    }

    .contact-form-wrapper {
      padding: var(--space-6);
    }

    .form-row {
      grid-template-columns: 1fr;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .contact-card,
    .form-input,
    .form-select,
    .form-textarea,
    .contact-link {
      transition: none;
    }

    .contact-card:hover {
      transform: none;
    }
  }
</style>

<script is:inline type="module">
  function encode(data) {
    return Object.keys(data)
      .map((key) => encodeURIComponent(key) + '=' + encodeURIComponent(data[key]))
      .join('&');
  }

  const form = document.querySelector('.contact-form');
  const submitButton = form instanceof HTMLFormElement
    ? form.querySelector('button[type="submit"]')
    : null;
  const defaultSubmitText = submitButton instanceof HTMLButtonElement
    ? submitButton.textContent || 'Enviar mensaje'
    : 'Enviar mensaje';

  if (form instanceof HTMLFormElement) {
    form.addEventListener('submit', (event) => {
      event.preventDefault();

      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      // Validación básica de campos obligatorios
      if (!data.name || !data.email || !data.message || !data.subject) {
        alert('Por favor complete todos los campos obligatorios.');
        return;
      }

      // Asegurar que Netlify sepa qué formulario es
      data['form-name'] = form.getAttribute('name') || 'afc-contact-es';

      // Construir asunto personalizado: {Nombre} -- {Asunto}
      const customSubject = `${data.name} -- ${data.subject}`;
      data['custom-subject'] = customSubject;

      // Mantener el campo oculto sincronizado (opcional)
      const customSubjectInput = form.querySelector('input[name="custom-subject"]');
      if (customSubjectInput) {
        customSubjectInput.value = customSubject;
      }

      if (submitButton instanceof HTMLButtonElement) {
        submitButton.classList.remove('submit-success');
        submitButton.classList.add('btn-primary');
        submitButton.disabled = true;
        submitButton.textContent = 'Submitting...';
      }

      fetch('/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: encode(data),
      })
        .then(() => {
          console.log('Formulario enviado:', data);
          setTimeout(() => {
            if (submitButton instanceof HTMLButtonElement) {
              submitButton.classList.remove('btn-primary');
              submitButton.classList.add('submit-success');
              submitButton.textContent = 'Thank you for your inquiry';
              submitButton.disabled = false;
            }
          }, 500);
          form.reset();
        })
        .catch((error) => {
          console.error('Error al enviar el formulario:', error);
          if (submitButton instanceof HTMLButtonElement) {
            submitButton.classList.remove('submit-success');
            submitButton.classList.add('btn-primary');
            submitButton.textContent = defaultSubmitText;
            submitButton.disabled = false;
          }
          alert('Hubo un problema al enviar el formulario. Por favor, inténtelo de nuevo.');
        });
    });
  }
</script>


